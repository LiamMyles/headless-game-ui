import{j as S}from"./jsx-runtime-CLpGMVip.js";import{r as k}from"./index-BAAwwy_G.js";function Te({durationSeconds:l,isRunning:i=!0}){const[h,g]=k.useState(!1),[p,I]=k.useState(l*1e3),w=k.useRef(0),y=k.useRef(0),x=k.useRef(0),T=1e3*l,j=k.useRef(l),L=k.useCallback((O,W)=>{W&&(y.current=performance.now());const q=O-y.current;if(q>=500){x.current=q+x.current,y.current=O;const v=Math.max(0,Math.round(T-x.current));I(v),x.current>=T&&g(!0)}x.current<=T&&(w.current=requestAnimationFrame(v=>{L(v,!1)}))},[T]);k.useEffect(()=>{j.current!==l?(x.current=0,I(T)):j.current=l},[T,l]),k.useEffect(()=>(i&&L(performance.now(),!0),()=>{cancelAnimationFrame(w.current),y.current=0}),[i,L]);function U(){I(l*1e3),g(!1),cancelAnimationFrame(w.current),x.current=0,i&&L(performance.now(),!0)}return{isFinished:h,timeLeft:p,reset:U}}function Ce(){return Math.floor(Math.random()*100)+1}const ke={sequenceToMatch:["ArrowDown","ArrowUp","ArrowRight","ArrowLeft"],inputSequence:[],gameState:"PLAYING"},Ee=(l,i)=>{switch(i.type){case"input":{if(l.gameState!=="PLAYING")return{...l};let h="PLAYING";const g=[...l.inputSequence,i.payload];return g.length===l.sequenceToMatch.length&&(h="PASS"),g.forEach((p,I)=>{p!==l.sequenceToMatch[I]&&(h="FAIL")}),{...l,inputSequence:g,gameState:h}}case"reset":return{...l,inputSequence:[],gameState:"PLAYING"};case"shuffle":{const h=[...l.sequenceToMatch];let g,p,I=i.payload;for(let w=h.length;w;w--){const y=Math.sin(I)*1e4,x=y-Math.floor(y);p=Math.floor(x*w),g=h[w-1],h[w-1]=h[p],h[p]=g,I++}return{...l,sequenceToMatch:h}}case"fail":return{...l,gameState:"FAIL"};default:return l}};function Fe(){const[l,i]=k.useState(!0),[h,g]=k.useReducer(Ee,ke),{isFinished:p,timeLeft:I,reset:w}=Te({durationSeconds:3,isRunning:l}),y=h.gameState;return k.useEffect(()=>{p&&g({type:"fail"})},[p]),k.useEffect(()=>{function x({key:T}){switch(T){case"Enter":{g({type:"reset"}),g({type:"shuffle",payload:Ce()}),i(!0),w();break}default:y==="PLAYING"&&g({payload:T,type:"input"})}}return window.addEventListener("keydown",x),()=>{window.removeEventListener("keydown",x)}},[y,w]),k.useEffect(()=>{(y==="PASS"||y==="FAIL")&&i(!1)},[y,w]),{quickTimeState:h,timeLeft:I}}var Y={};(function l(i,h,g,p){var I=!!(i.Worker&&i.Blob&&i.Promise&&i.OffscreenCanvas&&i.OffscreenCanvasRenderingContext2D&&i.HTMLCanvasElement&&i.HTMLCanvasElement.prototype.transferControlToOffscreen&&i.URL&&i.URL.createObjectURL),w=typeof Path2D=="function"&&typeof DOMMatrix=="function",y=function(){if(!i.OffscreenCanvas)return!1;var r=new OffscreenCanvas(1,1),e=r.getContext("2d");e.fillRect(0,0,1,1);var a=r.transferToImageBitmap();try{e.createPattern(a,"no-repeat")}catch{return!1}return!0}();function x(){}function T(r){var e=h.exports.Promise,a=e!==void 0?e:i.Promise;return typeof a=="function"?new a(r):(r(x,x),null)}var j=function(r,e){return{transform:function(a){if(r)return a;if(e.has(a))return e.get(a);var t=new OffscreenCanvas(a.width,a.height),o=t.getContext("2d");return o.drawImage(a,0,0),e.set(a,t),t},clear:function(){e.clear()}}}(y,new Map),L=function(){var r=Math.floor(16.666666666666668),e,a,t={},o=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(s){var c=Math.random();return t[c]=requestAnimationFrame(function n(u){o===u||o+r-1<u?(o=u,delete t[c],s()):t[c]=requestAnimationFrame(n)}),c},a=function(s){t[s]&&cancelAnimationFrame(t[s])}):(e=function(s){return setTimeout(s,r)},a=function(s){return clearTimeout(s)}),{frame:e,cancel:a}}(),U=function(){var r,e,a={};function t(o){function s(c,n){o.postMessage({options:c||{},callback:n})}o.init=function(n){var u=n.transferControlToOffscreen();o.postMessage({canvas:u},[u])},o.fire=function(n,u,f){if(e)return s(n,null),e;var b=Math.random().toString(36).slice(2);return e=T(function(m){function M(C){C.data.callback===b&&(delete a[b],o.removeEventListener("message",M),e=null,j.clear(),f(),m())}o.addEventListener("message",M),s(n,b),a[b]=M.bind(null,{data:{callback:b}})}),e},o.reset=function(){o.postMessage({reset:!0});for(var n in a)a[n](),delete a[n]}}return function(){if(r)return r;if(!g&&I){var o=["var CONFETTI, SIZE = {}, module = {};","("+l.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{r=new Worker(URL.createObjectURL(new Blob([o])))}catch(s){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",s),null}t(r)}return r}}(),O={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function W(r,e){return e?e(r):r}function q(r){return r!=null}function v(r,e,a){return W(r&&q(r[e])?r[e]:O[e],a)}function ae(r){return r<0?0:Math.floor(r)}function ne(r,e){return Math.floor(Math.random()*(e-r))+r}function z(r){return parseInt(r,16)}function te(r){return r.map(oe)}function oe(r){var e=String(r).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:z(e.substring(0,2)),g:z(e.substring(2,4)),b:z(e.substring(4,6))}}function ie(r){var e=v(r,"origin",Object);return e.x=v(e,"x",Number),e.y=v(e,"y",Number),e}function se(r){r.width=document.documentElement.clientWidth,r.height=document.documentElement.clientHeight}function le(r){var e=r.getBoundingClientRect();r.width=e.width,r.height=e.height}function ce(r){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=r,e}function ue(r,e,a,t,o,s,c,n,u){r.save(),r.translate(e,a),r.rotate(s),r.scale(t,o),r.arc(0,0,1,c,n,u),r.restore()}function de(r){var e=r.angle*(Math.PI/180),a=r.spread*(Math.PI/180);return{x:r.x,y:r.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:r.startVelocity*.5+Math.random()*r.startVelocity,angle2D:-e+(.5*a-Math.random()*a),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:r.color,shape:r.shape,tick:0,totalTicks:r.ticks,decay:r.decay,drift:r.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:r.gravity*3,ovalScalar:.6,scalar:r.scalar,flat:r.flat}}function he(r,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var a=e.tick++/e.totalTicks,t=e.x+e.random*e.tiltCos,o=e.y+e.random*e.tiltSin,s=e.wobbleX+e.random*e.tiltCos,c=e.wobbleY+e.random*e.tiltSin;if(r.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-a)+")",r.beginPath(),w&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))r.fill(me(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(s-t)*.1,Math.abs(c-o)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var n=Math.PI/10*e.wobble,u=Math.abs(s-t)*.1,f=Math.abs(c-o)*.1,b=e.shape.bitmap.width*e.scalar,m=e.shape.bitmap.height*e.scalar,M=new DOMMatrix([Math.cos(n)*u,Math.sin(n)*u,-Math.sin(n)*f,Math.cos(n)*f,e.x,e.y]);M.multiplySelf(new DOMMatrix(e.shape.matrix));var C=r.createPattern(j.transform(e.shape.bitmap),"no-repeat");C.setTransform(M),r.globalAlpha=1-a,r.fillStyle=C,r.fillRect(e.x-b/2,e.y-m/2,b,m),r.globalAlpha=1}else if(e.shape==="circle")r.ellipse?r.ellipse(e.x,e.y,Math.abs(s-t)*e.ovalScalar,Math.abs(c-o)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):ue(r,e.x,e.y,Math.abs(s-t)*e.ovalScalar,Math.abs(c-o)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var d=Math.PI/2*3,E=4*e.scalar,F=8*e.scalar,P=e.x,N=e.y,R=5,A=Math.PI/R;R--;)P=e.x+Math.cos(d)*F,N=e.y+Math.sin(d)*F,r.lineTo(P,N),d+=A,P=e.x+Math.cos(d)*E,N=e.y+Math.sin(d)*E,r.lineTo(P,N),d+=A;else r.moveTo(Math.floor(e.x),Math.floor(e.y)),r.lineTo(Math.floor(e.wobbleX),Math.floor(o)),r.lineTo(Math.floor(s),Math.floor(c)),r.lineTo(Math.floor(t),Math.floor(e.wobbleY));return r.closePath(),r.fill(),e.tick<e.totalTicks}function fe(r,e,a,t,o){var s=e.slice(),c=r.getContext("2d"),n,u,f=T(function(b){function m(){n=u=null,c.clearRect(0,0,t.width,t.height),j.clear(),o(),b()}function M(){g&&!(t.width===p.width&&t.height===p.height)&&(t.width=r.width=p.width,t.height=r.height=p.height),!t.width&&!t.height&&(a(r),t.width=r.width,t.height=r.height),c.clearRect(0,0,t.width,t.height),s=s.filter(function(C){return he(c,C)}),s.length?n=L.frame(M):m()}n=L.frame(M),u=m});return{addFettis:function(b){return s=s.concat(b),f},canvas:r,promise:f,reset:function(){n&&L.cancel(n),u&&u()}}}function V(r,e){var a=!r,t=!!v(e||{},"resize"),o=!1,s=v(e,"disableForReducedMotion",Boolean),c=I&&!!v(e||{},"useWorker"),n=c?U():null,u=a?se:le,f=r&&n?!!r.__confetti_initialized:!1,b=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,m;function M(d,E,F){for(var P=v(d,"particleCount",ae),N=v(d,"angle",Number),R=v(d,"spread",Number),A=v(d,"startVelocity",Number),pe=v(d,"decay",Number),be=v(d,"gravity",Number),Me=v(d,"drift",Number),Z=v(d,"colors",te),we=v(d,"ticks",Number),H=v(d,"shapes"),ye=v(d,"scalar"),xe=!!v(d,"flat"),$=ie(d),J=P,_=[],Ie=r.width*$.x,Se=r.height*$.y;J--;)_.push(de({x:Ie,y:Se,angle:N,spread:R,startVelocity:A,color:Z[J%Z.length],shape:H[ne(0,H.length)],ticks:we,decay:pe,gravity:be,drift:Me,scalar:ye,flat:xe}));return m?m.addFettis(_):(m=fe(r,_,u,E,F),m.promise)}function C(d){var E=s||v(d,"disableForReducedMotion",Boolean),F=v(d,"zIndex",Number);if(E&&b)return T(function(A){A()});a&&m?r=m.canvas:a&&!r&&(r=ce(F),document.body.appendChild(r)),t&&!f&&u(r);var P={width:r.width,height:r.height};n&&!f&&n.init(r),f=!0,n&&(r.__confetti_initialized=!0);function N(){if(n){var A={getBoundingClientRect:function(){if(!a)return r.getBoundingClientRect()}};u(A),n.postMessage({resize:{width:A.width,height:A.height}});return}P.width=P.height=null}function R(){m=null,t&&(o=!1,i.removeEventListener("resize",N)),a&&r&&(document.body.contains(r)&&document.body.removeChild(r),r=null,f=!1)}return t&&!o&&(o=!0,i.addEventListener("resize",N,!1)),n?n.fire(d,P,R):M(d,P,R)}return C.reset=function(){n&&n.reset(),m&&m.reset()},C}var G;function Q(){return G||(G=V(null,{useWorker:!0,resize:!0})),G}function me(r,e,a,t,o,s,c){var n=new Path2D(r),u=new Path2D;u.addPath(n,new DOMMatrix(e));var f=new Path2D;return f.addPath(u,new DOMMatrix([Math.cos(c)*o,Math.sin(c)*o,-Math.sin(c)*s,Math.cos(c)*s,a,t])),f}function ve(r){if(!w)throw new Error("path confetti are not supported in this browser");var e,a;typeof r=="string"?e=r:(e=r.path,a=r.matrix);var t=new Path2D(e),o=document.createElement("canvas"),s=o.getContext("2d");if(!a){for(var c=1e3,n=c,u=c,f=0,b=0,m,M,C=0;C<c;C+=2)for(var d=0;d<c;d+=2)s.isPointInPath(t,C,d,"nonzero")&&(n=Math.min(n,C),u=Math.min(u,d),f=Math.max(f,C),b=Math.max(b,d));m=f-n,M=b-u;var E=10,F=Math.min(E/m,E/M);a=[F,0,0,F,-Math.round(m/2+n)*F,-Math.round(M/2+u)*F]}return{type:"path",path:e,matrix:a}}function ge(r){var e,a=1,t="#000000",o='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof r=="string"?e=r:(e=r.text,a="scalar"in r?r.scalar:a,o="fontFamily"in r?r.fontFamily:o,t="color"in r?r.color:t);var s=10*a,c=""+s+"px "+o,n=new OffscreenCanvas(s,s),u=n.getContext("2d");u.font=c;var f=u.measureText(e),b=Math.ceil(f.actualBoundingBoxRight+f.actualBoundingBoxLeft),m=Math.ceil(f.actualBoundingBoxAscent+f.actualBoundingBoxDescent),M=2,C=f.actualBoundingBoxLeft+M,d=f.actualBoundingBoxAscent+M;b+=M+M,m+=M+M,n=new OffscreenCanvas(b,m),u=n.getContext("2d"),u.font=c,u.fillStyle=t,u.fillText(e,C,d);var E=1/a;return{type:"bitmap",bitmap:n.transferToImageBitmap(),matrix:[E,0,0,E,-b*E/2,-m*E/2]}}h.exports=function(){return Q().apply(this,arguments)},h.exports.reset=function(){Q().reset()},h.exports.create=V,h.exports.shapeFromPath=ve,h.exports.shapeFromText=ge})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Y,!1);const B=Y.exports;Y.exports.create;function Pe(){const h=Date.now()+2e3,g=B.shapeFromText({text:"ðŸ¦„",scalar:3}),p=B.shapeFromText({text:"ðŸ˜¸",scalar:3}),I={startVelocity:30,spread:360,ticks:120,zIndex:0};function w(x,T){return Math.random()*(T-x)+x}const y=setInterval(function(){const x=h-Date.now();if(x<=0)return clearInterval(y);const T=50*(x/2e3);B({...I,particleCount:T,shapes:[g,p],scalar:3,origin:{x:w(.1,.3),y:Math.random()-.2}}),B({...I,particleCount:T,scalar:3,shapes:[g,p],origin:{x:w(.7,.9),y:Math.random()-.2}})},250)}function re(){const{quickTimeState:l,timeLeft:i}=Fe(),h=l.gameState;return k.useEffect(()=>{h==="PASS"&&Pe()},[h]),S.jsx("div",{children:S.jsxs("div",{children:[S.jsx("h1",{className:"m-auto mb-2 w-max text-4xl font-bold",children:"Quick Time Game"}),S.jsxs("div",{className:"mb-4",children:[l.gameState==="PLAYING"&&S.jsx("h2",{className:"m-auto my-2 block w-max rounded-2xl border border-slate-800 bg-white p-1 font-bold text-slate-700",children:"PLAYING"}),l.gameState==="FAIL"&&S.jsx("h2",{className:"m-auto my-2 block w-max rounded-2xl border border-slate-800 bg-white p-1 font-bold text-rose-700",children:"YOU FAIL"}),l.gameState==="PASS"&&S.jsx("h2",{className:"m-auto my-2 block w-max rounded-2xl border border-slate-800 bg-white p-1 font-bold text-green-700",children:"YOU WIN!"})]}),S.jsx("ul",{className:"m-auto flex w-min list-none gap-2",children:l.sequenceToMatch.map((g,p)=>{const I=l.inputSequence[p],w=l.inputSequence[p-1];let y=!1;return(p===0&&I===void 0||I===void 0&&w!==void 0)&&(y=!0),S.jsx(Ae,{isActiveKey:y,inputKey:I,expectedKey:g},g)})}),S.jsxs("div",{className:"m-auto mt-4 flex w-min flex-col items-center gap-2",children:[S.jsx("label",{htmlFor:"progress-bar",children:"Timer"}),S.jsx("progress",{className:"[&::-moz-progress-bar]:bg-violet-400 [&::-webkit-progress-bar]:overflow-hidden [&::-webkit-progress-bar]:rounded-lg [&::-webkit-progress-bar]:bg-slate-300 [&::-webkit-progress-value]:rounded-lg [&::-webkit-progress-value]:bg-violet-400 [&::-webkit-progress-value]:transition-all [&::-webkit-progress-value]:duration-100 [&::-webkit-progress-value]:ease-in",id:"progress-bar",value:i,max:3e3})]})]})})}function Ae({inputKey:l,expectedKey:i,isActiveKey:h}){return h?S.jsx("li",{children:S.jsx("div",{className:"rounded-md border border-blue-200 p-1 font-bold text-blue-800",role:"img","aria-label":`current key ${i}`,children:i})}):l===i?S.jsx("li",{children:S.jsx("div",{className:"rounded-md border border-green-200 p-1 text-green-800",role:"img","aria-label":`successful key ${i}`,children:i})}):l!==void 0&&i!==l?S.jsx("li",{children:S.jsx("div",{className:"rounded-md border border-red-200 p-1 text-red-800",role:"img","aria-label":`failed on key ${i}`,children:i})}):S.jsx("li",{children:S.jsx("div",{className:"rounded-md border border-slate-200 p-1 text-slate-800",role:"img","aria-label":`upcoming key ${i}`,children:i})})}re.__docgenInfo={description:"",methods:[],displayName:"QuickTime"};const Re={title:"Quick TIme",component:re,parameters:{layout:"centered"},tags:["autodocs"]},D={args:{}};var X,K,ee;D.parameters={...D.parameters,docs:{...(X=D.parameters)==null?void 0:X.docs,source:{originalSource:`{
  args: {}
}`,...(ee=(K=D.parameters)==null?void 0:K.docs)==null?void 0:ee.source}}};const je=["Default"];export{D as Default,je as __namedExportsOrder,Re as default};
